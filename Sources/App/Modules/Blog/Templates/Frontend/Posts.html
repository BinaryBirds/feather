#let(head = [
    "title": $vars["posts.page.title"],
    "description": $vars["posts.page.description"]
])
#define(body):
<div id="posts" class="wrapper w:full m:xl">

    <header class="m:b:l center">
        <h1>#(head.title)</h1>
        <p>#(head.description)</p>
    </header>
    
    <form class="wrapper w m:b:l" id="search-form" action="#($req.url.path)" method="get">
        #if(Request(query: "limit") != nil):
        <input type="hidden" id="limit" name="limit" value="#Request(query: "limit")">
        #endif
        <input type="text" id="search" name="search" placeholder="Search..." value="#Request(query: "search")">
    </form>

    
    <div class="g3 g:gap:l">
    #for((index, post) in page.items):
        #inline("Blog/Frontend/SinglePost")
    #endfor
    </div>
    
    #if(page.items.isEmpty()):
    <div class="wrapper w center">
        <div class="m:xl">
            <span class="h1">#($vars["empty.list.icon"])</span>
            <p class="h1">#($vars["empty.list.title"])</p>
            <p>#($vars["empty.list.description"])</p>
            <p><a href="#($req.url.path)">#($vars["empty.list.link"])</a></p>
        </div>
    </div>
    #endif

    <div class="pager">
    #inline("Frontend/Pagination")
    </div>
</div>
<script>

function debounce(func, wait, immediate) {
var timeout;
return function() {
    var context = this, args = arguments;
    var later = function() {
        timeout = null;
        if (!immediate) func.apply(context, args);
    };
    var callNow = immediate && !timeout;
    clearTimeout(timeout);
    timeout = setTimeout(later, wait);
    if (callNow) func.apply(context, args);
};
};

const source = document.getElementById('search');
const inputHandler = debounce(function(e) {
console.warn(e.target.value);
return;
var xmlHttp = new XMLHttpRequest();
xmlHttp.onreadystatechange = function() {
    if (xmlHttp.readyState != 4 || xmlHttp.status != 200) {
        return
    }
    console.warn(xmlHttp.responseText)
    var element = document.getElementById(id)
    var tr = element.parentElement.parentElement
    tr.parentNode.removeChild(tr)
}
xmlHttp.open("POST", path + id + "/delete", true);
xmlHttp.send(null);
}, 250);

source.addEventListener('input', inputHandler);
source.addEventListener('propertychange', inputHandler);
// source.addEventListener('change', inputHandler);
</script>
#enddefine
#inline("Frontend/Index")
